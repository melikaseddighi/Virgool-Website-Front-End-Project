/*! For license information please see app.js.LICENSE.txt */
(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{hasBrowserEnv:()=>ae,hasStandardBrowserEnv:()=>ce,hasStandardBrowserWebWorkerEnv:()=>ue,origin:()=>de});class r{constructor(e,t){this.pageName=e,this.urlName=t}renderContent(e,t){!this.mustBeLogin()||Wt.getAuthServices().checkLogin()?this.restrictLogin()&&Wt.getAuthServices().checkLogin()?Wt.getRouter().navigateTo("profile"):fetch(`./pages/${this.pageName}.html`).then((e=>e.text())).then((e=>this.beforeRender(e,t))).then((t=>{e.innerHTML=t,this.afterRender()})):Wt.getRouter().navigateTo("login")}beforeRender(e){return e}afterRender(){console.log("Default Rendering")}restrictLogin(){return!1}mustBeLogin(){return!1}}class n{constructor(e,t){for(let t in e)this[t]=e[t];this.template=t}renderSounds(){const e=document.importNode(this.template.content,!0);return e.querySelector("#sound-img").src=this.srccover,e.querySelector("#sound-text").textContent=this.title,e.querySelector("#sound-time").textContent=this.time,e.querySelector("#sound-src").setAttribute("data-src",this.podcasturl),e}}function s(e,t){return function(){return e.apply(t,arguments)}}const{toString:o}=Object.prototype,{getPrototypeOf:i}=Object,a=(c=Object.create(null),e=>{const t=o.call(e);return c[t]||(c[t]=t.slice(8,-1).toLowerCase())});var c;const l=e=>(e=e.toLowerCase(),t=>a(t)===e),u=e=>t=>typeof t===e,{isArray:d}=Array,h=u("undefined"),p=l("ArrayBuffer"),m=u("string"),g=u("function"),f=u("number"),y=e=>null!==e&&"object"==typeof e,S=e=>{if("object"!==a(e))return!1;const t=i(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},b=l("Date"),w=l("File"),E=l("Blob"),v=l("FileList"),L=l("URLSearchParams"),[T,R,A,P]=["ReadableStream","Request","Response","Headers"].map(l);function C(e,t,{allOwnKeys:r=!1}={}){if(null==e)return;let n,s;if("object"!=typeof e&&(e=[e]),d(e))for(n=0,s=e.length;n<s;n++)t.call(null,e[n],n,e);else{const s=r?Object.getOwnPropertyNames(e):Object.keys(e),o=s.length;let i;for(n=0;n<o;n++)i=s[n],t.call(null,e[i],i,e)}}function q(e,t){t=t.toLowerCase();const r=Object.keys(e);let n,s=r.length;for(;s-- >0;)if(n=r[s],t===n.toLowerCase())return n;return null}const x="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,O=e=>!h(e)&&e!==x,k=(I="undefined"!=typeof Uint8Array&&i(Uint8Array),e=>I&&e instanceof I);var I;const N=l("HTMLFormElement"),B=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),_=l("RegExp"),U=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};C(r,((r,s)=>{let o;!1!==(o=t(r,s,e))&&(n[s]=o||r)})),Object.defineProperties(e,n)},F="abcdefghijklmnopqrstuvwxyz",D="0123456789",j={DIGIT:D,ALPHA:F,ALPHA_DIGIT:F+F.toUpperCase()+D},M=l("AsyncFunction"),H={isArray:d,isArrayBuffer:p,isBuffer:function(e){return null!==e&&!h(e)&&null!==e.constructor&&!h(e.constructor)&&g(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||g(e.append)&&("formdata"===(t=a(e))||"object"===t&&g(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&p(e.buffer),t},isString:m,isNumber:f,isBoolean:e=>!0===e||!1===e,isObject:y,isPlainObject:S,isReadableStream:T,isRequest:R,isResponse:A,isHeaders:P,isUndefined:h,isDate:b,isFile:w,isBlob:E,isRegExp:_,isFunction:g,isStream:e=>y(e)&&g(e.pipe),isURLSearchParams:L,isTypedArray:k,isFileList:v,forEach:C,merge:function e(){const{caseless:t}=O(this)&&this||{},r={},n=(n,s)=>{const o=t&&q(r,s)||s;S(r[o])&&S(n)?r[o]=e(r[o],n):S(n)?r[o]=e({},n):d(n)?r[o]=n.slice():r[o]=n};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&C(arguments[e],n);return r},extend:(e,t,r,{allOwnKeys:n}={})=>(C(t,((t,n)=>{r&&g(t)?e[n]=s(t,r):e[n]=t}),{allOwnKeys:n}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let s,o,a;const c={};if(t=t||{},null==e)return t;do{for(s=Object.getOwnPropertyNames(e),o=s.length;o-- >0;)a=s[o],n&&!n(a,e,t)||c[a]||(t[a]=e[a],c[a]=!0);e=!1!==r&&i(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:a,kindOfTest:l,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return-1!==n&&n===r},toArray:e=>{if(!e)return null;if(d(e))return e;let t=e.length;if(!f(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let n;for(;(n=r.next())&&!n.done;){const r=n.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:N,hasOwnProperty:B,hasOwnProp:B,reduceDescriptors:U,freezeMethods:e=>{U(e,((t,r)=>{if(g(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const n=e[r];g(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))}))},toObjectSet:(e,t)=>{const r={},n=e=>{e.forEach((e=>{r[e]=!0}))};return d(e)?n(e):n(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,r){return t.toUpperCase()+r})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:q,global:x,isContextDefined:O,ALPHABET:j,generateString:(e=16,t=j.ALPHA_DIGIT)=>{let r="";const{length:n}=t;for(;e--;)r+=t[Math.random()*n|0];return r},isSpecCompliantForm:function(e){return!!(e&&g(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),r=(e,n)=>{if(y(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[n]=e;const s=d(e)?[]:{};return C(e,((e,t)=>{const o=r(e,n+1);!h(o)&&(s[t]=o)})),t[n]=void 0,s}}return e};return r(e,0)},isAsyncFn:M,isThenable:e=>e&&(y(e)||g(e))&&g(e.then)&&g(e.catch)};function $(e,t,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s)}H.inherits($,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:H.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const W=$.prototype,z={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{z[e]={value:e}})),Object.defineProperties($,z),Object.defineProperty(W,"isAxiosError",{value:!0}),$.from=(e,t,r,n,s,o)=>{const i=Object.create(W);return H.toFlatObject(e,i,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),$.call(i,e.message,t,r,n,s),i.cause=e,i.name=e.name,o&&Object.assign(i,o),i};const J=$;function V(e){return H.isPlainObject(e)||H.isArray(e)}function K(e){return H.endsWith(e,"[]")?e.slice(0,-2):e}function G(e,t,r){return e?e.concat(t).map((function(e,t){return e=K(e),!r&&t?"["+e+"]":e})).join(r?".":""):t}const X=H.toFlatObject(H,{},null,(function(e){return/^is[A-Z]/.test(e)})),Q=function(e,t,r){if(!H.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(r=H.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!H.isUndefined(t[e])}))).metaTokens,s=r.visitor||l,o=r.dots,i=r.indexes,a=(r.Blob||"undefined"!=typeof Blob&&Blob)&&H.isSpecCompliantForm(t);if(!H.isFunction(s))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(H.isDate(e))return e.toISOString();if(!a&&H.isBlob(e))throw new J("Blob is not supported. Use a Buffer instead.");return H.isArrayBuffer(e)||H.isTypedArray(e)?a&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,r,s){let a=e;if(e&&!s&&"object"==typeof e)if(H.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else if(H.isArray(e)&&function(e){return H.isArray(e)&&!e.some(V)}(e)||(H.isFileList(e)||H.endsWith(r,"[]"))&&(a=H.toArray(e)))return r=K(r),a.forEach((function(e,n){!H.isUndefined(e)&&null!==e&&t.append(!0===i?G([r],n,o):null===i?r:r+"[]",c(e))})),!1;return!!V(e)||(t.append(G(s,r,o),c(e)),!1)}const u=[],d=Object.assign(X,{defaultVisitor:l,convertValue:c,isVisitable:V});if(!H.isObject(e))throw new TypeError("data must be an object");return function e(r,n){if(!H.isUndefined(r)){if(-1!==u.indexOf(r))throw Error("Circular reference detected in "+n.join("."));u.push(r),H.forEach(r,(function(r,o){!0===(!(H.isUndefined(r)||null===r)&&s.call(t,r,H.isString(o)?o.trim():o,n,d))&&e(r,n?n.concat(o):[o])})),u.pop()}}(e),t};function Y(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Z(e,t){this._pairs=[],e&&Q(e,this,t)}const ee=Z.prototype;ee.append=function(e,t){this._pairs.push([e,t])},ee.toString=function(e){const t=e?function(t){return e.call(this,t,Y)}:Y;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const te=Z;function re(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ne(e,t,r){if(!t)return e;const n=r&&r.encode||re,s=r&&r.serialize;let o;if(o=s?s(t,r):H.isURLSearchParams(t)?t.toString():new te(t,r).toString(n),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}const se=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){H.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},oe={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ie={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:te,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},ae="undefined"!=typeof window&&"undefined"!=typeof document,ce=(le="undefined"!=typeof navigator&&navigator.product,ae&&["ReactNative","NativeScript","NS"].indexOf(le)<0);var le;const ue="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,de=ae&&window.location.href||"http://localhost",he={...t,...ie},pe=function(e){function t(e,r,n,s){let o=e[s++];if("__proto__"===o)return!0;const i=Number.isFinite(+o),a=s>=e.length;return o=!o&&H.isArray(n)?n.length:o,a?(H.hasOwnProp(n,o)?n[o]=[n[o],r]:n[o]=r,!i):(n[o]&&H.isObject(n[o])||(n[o]=[]),t(e,r,n[o],s)&&H.isArray(n[o])&&(n[o]=function(e){const t={},r=Object.keys(e);let n;const s=r.length;let o;for(n=0;n<s;n++)o=r[n],t[o]=e[o];return t}(n[o])),!i)}if(H.isFormData(e)&&H.isFunction(e.entries)){const r={};return H.forEachEntry(e,((e,n)=>{t(function(e){return H.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),n,r,0)})),r}return null},me={transitional:oe,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",n=r.indexOf("application/json")>-1,s=H.isObject(e);if(s&&H.isHTMLForm(e)&&(e=new FormData(e)),H.isFormData(e))return n?JSON.stringify(pe(e)):e;if(H.isArrayBuffer(e)||H.isBuffer(e)||H.isStream(e)||H.isFile(e)||H.isBlob(e)||H.isReadableStream(e))return e;if(H.isArrayBufferView(e))return e.buffer;if(H.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Q(e,new he.classes.URLSearchParams,Object.assign({visitor:function(e,t,r,n){return he.isNode&&H.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((o=H.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Q(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return s||n?(t.setContentType("application/json",!1),function(e){if(H.isString(e))try{return(0,JSON.parse)(e),H.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||me.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(H.isResponse(e)||H.isReadableStream(e))return e;if(e&&H.isString(e)&&(r&&!this.responseType||n)){const r=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(e){if(r){if("SyntaxError"===e.name)throw J.from(e,J.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:he.classes.FormData,Blob:he.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};H.forEach(["delete","get","head","post","put","patch"],(e=>{me.headers[e]={}}));const ge=me,fe=H.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ye=Symbol("internals");function Se(e){return e&&String(e).trim().toLowerCase()}function be(e){return!1===e||null==e?e:H.isArray(e)?e.map(be):String(e)}function we(e,t,r,n,s){return H.isFunction(n)?n.call(this,t,r):(s&&(t=r),H.isString(t)?H.isString(n)?-1!==t.indexOf(n):H.isRegExp(n)?n.test(t):void 0:void 0)}class Ee{constructor(e){e&&this.set(e)}set(e,t,r){const n=this;function s(e,t,r){const s=Se(t);if(!s)throw new Error("header name must be a non-empty string");const o=H.findKey(n,s);(!o||void 0===n[o]||!0===r||void 0===r&&!1!==n[o])&&(n[o||t]=be(e))}const o=(e,t)=>H.forEach(e,((e,r)=>s(e,r,t)));if(H.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(H.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))o((e=>{const t={};let r,n,s;return e&&e.split("\n").forEach((function(e){s=e.indexOf(":"),r=e.substring(0,s).trim().toLowerCase(),n=e.substring(s+1).trim(),!r||t[r]&&fe[r]||("set-cookie"===r?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)})),t})(e),t);else if(H.isHeaders(e))for(const[t,n]of e.entries())s(n,t,r);else null!=e&&s(t,e,r);return this}get(e,t){if(e=Se(e)){const r=H.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}(e);if(H.isFunction(t))return t.call(this,e,r);if(H.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Se(e)){const r=H.findKey(this,e);return!(!r||void 0===this[r]||t&&!we(0,this[r],r,t))}return!1}delete(e,t){const r=this;let n=!1;function s(e){if(e=Se(e)){const s=H.findKey(r,e);!s||t&&!we(0,r[s],s,t)||(delete r[s],n=!0)}}return H.isArray(e)?e.forEach(s):s(e),n}clear(e){const t=Object.keys(this);let r=t.length,n=!1;for(;r--;){const s=t[r];e&&!we(0,this[s],s,e,!0)||(delete this[s],n=!0)}return n}normalize(e){const t=this,r={};return H.forEach(this,((n,s)=>{const o=H.findKey(r,s);if(o)return t[o]=be(n),void delete t[s];const i=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,r)=>t.toUpperCase()+r))}(s):String(s).trim();i!==s&&delete t[s],t[i]=be(n),r[i]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return H.forEach(this,((r,n)=>{null!=r&&!1!==r&&(t[n]=e&&H.isArray(r)?r.join(", "):r)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach((e=>r.set(e))),r}static accessor(e){const t=(this[ye]=this[ye]={accessors:{}}).accessors,r=this.prototype;function n(e){const n=Se(e);t[n]||(function(e,t){const r=H.toCamelCase(" "+t);["get","set","has"].forEach((n=>{Object.defineProperty(e,n+r,{value:function(e,r,s){return this[n].call(this,t,e,r,s)},configurable:!0})}))}(r,e),t[n]=!0)}return H.isArray(e)?e.forEach(n):n(e),this}}Ee.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),H.reduceDescriptors(Ee.prototype,(({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[r]=e}}})),H.freezeMethods(Ee);const ve=Ee;function Le(e,t){const r=this||ge,n=t||r,s=ve.from(n.headers);let o=n.data;return H.forEach(e,(function(e){o=e.call(r,o,s.normalize(),t?t.status:void 0)})),s.normalize(),o}function Te(e){return!(!e||!e.__CANCEL__)}function Re(e,t,r){J.call(this,null==e?"canceled":e,J.ERR_CANCELED,t,r),this.name="CanceledError"}H.inherits(Re,J,{__CANCEL__:!0});const Ae=Re;function Pe(e,t,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new J("Request failed with status code "+r.status,[J.ERR_BAD_REQUEST,J.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}const Ce=(e,t,r=3)=>{let n=0;const s=function(e,t){e=e||10;const r=new Array(e),n=new Array(e);let s,o=0,i=0;return t=void 0!==t?t:1e3,function(a){const c=Date.now(),l=n[i];s||(s=c),r[o]=a,n[o]=c;let u=i,d=0;for(;u!==o;)d+=r[u++],u%=e;if(o=(o+1)%e,o===i&&(i=(i+1)%e),c-s<t)return;const h=l&&c-l;return h?Math.round(1e3*d/h):void 0}}(50,250);return function(e,t){let r=0;const n=1e3/t;let s=null;return function(){const t=!0===this,o=Date.now();if(t||o-r>n)return s&&(clearTimeout(s),s=null),r=o,e.apply(null,arguments);s||(s=setTimeout((()=>(s=null,r=Date.now(),e.apply(null,arguments))),n-(o-r)))}}((r=>{const o=r.loaded,i=r.lengthComputable?r.total:void 0,a=o-n,c=s(a);n=o;const l={loaded:o,total:i,progress:i?o/i:void 0,bytes:a,rate:c||void 0,estimated:c&&i&&o<=i?(i-o)/c:void 0,event:r,lengthComputable:null!=i};l[t?"download":"upload"]=!0,e(l)}),r)},qe=he.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let r;function n(r){let n=r;return e&&(t.setAttribute("href",n),n=t.href),t.setAttribute("href",n),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return r=n(window.location.href),function(e){const t=H.isString(e)?n(e):e;return t.protocol===r.protocol&&t.host===r.host}}():function(){return!0},xe=he.hasStandardBrowserEnv?{write(e,t,r,n,s,o){const i=[e+"="+encodeURIComponent(t)];H.isNumber(r)&&i.push("expires="+new Date(r).toGMTString()),H.isString(n)&&i.push("path="+n),H.isString(s)&&i.push("domain="+s),!0===o&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Oe(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const ke=e=>e instanceof ve?{...e}:e;function Ie(e,t){t=t||{};const r={};function n(e,t,r){return H.isPlainObject(e)&&H.isPlainObject(t)?H.merge.call({caseless:r},e,t):H.isPlainObject(t)?H.merge({},t):H.isArray(t)?t.slice():t}function s(e,t,r){return H.isUndefined(t)?H.isUndefined(e)?void 0:n(void 0,e,r):n(e,t,r)}function o(e,t){if(!H.isUndefined(t))return n(void 0,t)}function i(e,t){return H.isUndefined(t)?H.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function a(r,s,o){return o in t?n(r,s):o in e?n(void 0,r):void 0}const c={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:a,headers:(e,t)=>s(ke(e),ke(t),!0)};return H.forEach(Object.keys(Object.assign({},e,t)),(function(n){const o=c[n]||s,i=o(e[n],t[n],n);H.isUndefined(i)&&o!==a||(r[n]=i)})),r}const Ne=e=>{const t=Ie({},e);let r,{data:n,withXSRFToken:s,xsrfHeaderName:o,xsrfCookieName:i,headers:a,auth:c}=t;if(t.headers=a=ve.from(a),t.url=ne(Oe(t.baseURL,t.url),e.params,e.paramsSerializer),c&&a.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),H.isFormData(n))if(he.hasStandardBrowserEnv||he.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(r=a.getContentType())){const[e,...t]=r?r.split(";").map((e=>e.trim())).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...t].join("; "))}if(he.hasStandardBrowserEnv&&(s&&H.isFunction(s)&&(s=s(t)),s||!1!==s&&qe(t.url))){const e=o&&i&&xe.read(i);e&&a.set(o,e)}return t},Be="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,r){const n=Ne(e);let s=n.data;const o=ve.from(n.headers).normalize();let i,{responseType:a}=n;function c(){n.cancelToken&&n.cancelToken.unsubscribe(i),n.signal&&n.signal.removeEventListener("abort",i)}let l=new XMLHttpRequest;function u(){if(!l)return;const n=ve.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders());Pe((function(e){t(e),c()}),(function(e){r(e),c()}),{data:a&&"text"!==a&&"json"!==a?l.response:l.responseText,status:l.status,statusText:l.statusText,headers:n,config:e,request:l}),l=null}l.open(n.method.toUpperCase(),n.url,!0),l.timeout=n.timeout,"onloadend"in l?l.onloadend=u:l.onreadystatechange=function(){l&&4===l.readyState&&(0!==l.status||l.responseURL&&0===l.responseURL.indexOf("file:"))&&setTimeout(u)},l.onabort=function(){l&&(r(new J("Request aborted",J.ECONNABORTED,n,l)),l=null)},l.onerror=function(){r(new J("Network Error",J.ERR_NETWORK,n,l)),l=null},l.ontimeout=function(){let e=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const t=n.transitional||oe;n.timeoutErrorMessage&&(e=n.timeoutErrorMessage),r(new J(e,t.clarifyTimeoutError?J.ETIMEDOUT:J.ECONNABORTED,n,l)),l=null},void 0===s&&o.setContentType(null),"setRequestHeader"in l&&H.forEach(o.toJSON(),(function(e,t){l.setRequestHeader(t,e)})),H.isUndefined(n.withCredentials)||(l.withCredentials=!!n.withCredentials),a&&"json"!==a&&(l.responseType=n.responseType),"function"==typeof n.onDownloadProgress&&l.addEventListener("progress",Ce(n.onDownloadProgress,!0)),"function"==typeof n.onUploadProgress&&l.upload&&l.upload.addEventListener("progress",Ce(n.onUploadProgress)),(n.cancelToken||n.signal)&&(i=t=>{l&&(r(!t||t.type?new Ae(null,e,l):t),l.abort(),l=null)},n.cancelToken&&n.cancelToken.subscribe(i),n.signal&&(n.signal.aborted?i():n.signal.addEventListener("abort",i)));const d=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(n.url);d&&-1===he.protocols.indexOf(d)?r(new J("Unsupported protocol "+d+":",J.ERR_BAD_REQUEST,e)):l.send(s||null)}))},_e=(e,t)=>{let r,n=new AbortController;const s=function(e){if(!r){r=!0,i();const t=e instanceof Error?e:this.reason;n.abort(t instanceof J?t:new Ae(t instanceof Error?t.message:t))}};let o=t&&setTimeout((()=>{s(new J(`timeout ${t} of ms exceeded`,J.ETIMEDOUT))}),t);const i=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach((e=>{e&&(e.removeEventListener?e.removeEventListener("abort",s):e.unsubscribe(s))})),e=null)};e.forEach((e=>e&&e.addEventListener&&e.addEventListener("abort",s)));const{signal:a}=n;return a.unsubscribe=i,[a,()=>{o&&clearTimeout(o),o=null}]},Ue=function*(e,t){let r=e.byteLength;if(!t||r<t)return void(yield e);let n,s=0;for(;s<r;)n=s+t,yield e.slice(s,n),s=n},Fe=(e,t,r,n,s)=>{const o=async function*(e,t,r){for await(const n of e)yield*Ue(ArrayBuffer.isView(n)?n:await r(String(n)),t)}(e,t,s);let i=0;return new ReadableStream({type:"bytes",async pull(e){const{done:t,value:s}=await o.next();if(t)return e.close(),void n();let a=s.byteLength;r&&r(i+=a),e.enqueue(new Uint8Array(s))},cancel:e=>(n(e),o.return())},{highWaterMark:2})},De=(e,t)=>{const r=null!=e;return n=>setTimeout((()=>t({lengthComputable:r,total:e,loaded:n})))},je="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,Me=je&&"function"==typeof ReadableStream,He=je&&("function"==typeof TextEncoder?($e=new TextEncoder,e=>$e.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var $e;const We=Me&&(()=>{let e=!1;const t=new Request(he.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})(),ze=Me&&!!(()=>{try{return H.isReadableStream(new Response("").body)}catch(e){}})(),Je={stream:ze&&(e=>e.body)};var Ve;je&&(Ve=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!Je[e]&&(Je[e]=H.isFunction(Ve[e])?t=>t[e]():(t,r)=>{throw new J(`Response type '${e}' is not supported`,J.ERR_NOT_SUPPORT,r)})})));const Ke={http:null,xhr:Be,fetch:je&&(async e=>{let{url:t,method:r,data:n,signal:s,cancelToken:o,timeout:i,onDownloadProgress:a,onUploadProgress:c,responseType:l,headers:u,withCredentials:d="same-origin",fetchOptions:h}=Ne(e);l=l?(l+"").toLowerCase():"text";let p,m,[g,f]=s||o||i?_e([s,o],i):[];const y=()=>{!p&&setTimeout((()=>{g&&g.unsubscribe()})),p=!0};let S;try{if(c&&We&&"get"!==r&&"head"!==r&&0!==(S=await(async(e,t)=>{const r=H.toFiniteNumber(e.getContentLength());return null==r?(async e=>null==e?0:H.isBlob(e)?e.size:H.isSpecCompliantForm(e)?(await new Request(e).arrayBuffer()).byteLength:H.isArrayBufferView(e)?e.byteLength:(H.isURLSearchParams(e)&&(e+=""),H.isString(e)?(await He(e)).byteLength:void 0))(t):r})(u,n))){let e,r=new Request(t,{method:"POST",body:n,duplex:"half"});H.isFormData(n)&&(e=r.headers.get("content-type"))&&u.setContentType(e),r.body&&(n=Fe(r.body,65536,De(S,Ce(c)),null,He))}H.isString(d)||(d=d?"cors":"omit"),m=new Request(t,{...h,signal:g,method:r.toUpperCase(),headers:u.normalize().toJSON(),body:n,duplex:"half",withCredentials:d});let s=await fetch(m);const o=ze&&("stream"===l||"response"===l);if(ze&&(a||o)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=s[t]}));const t=H.toFiniteNumber(s.headers.get("content-length"));s=new Response(Fe(s.body,65536,a&&De(t,Ce(a,!0)),o&&y,He),e)}l=l||"text";let i=await Je[H.findKey(Je,l)||"text"](s,e);return!o&&y(),f&&f(),await new Promise(((t,r)=>{Pe(t,r,{data:i,headers:ve.from(s.headers),status:s.status,statusText:s.statusText,config:e,request:m})}))}catch(t){if(y(),t&&"TypeError"===t.name&&/fetch/i.test(t.message))throw Object.assign(new J("Network Error",J.ERR_NETWORK,e,m),{cause:t.cause||t});throw J.from(t,t&&t.code,e,m)}})};H.forEach(Ke,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));const Ge=e=>`- ${e}`,Xe=e=>H.isFunction(e)||null===e||!1===e,Qe=e=>{e=H.isArray(e)?e:[e];const{length:t}=e;let r,n;const s={};for(let o=0;o<t;o++){let t;if(r=e[o],n=r,!Xe(r)&&(n=Ke[(t=String(r)).toLowerCase()],void 0===n))throw new J(`Unknown adapter '${t}'`);if(n)break;s[t||"#"+o]=n}if(!n){const e=Object.entries(s).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));let r=t?e.length>1?"since :\n"+e.map(Ge).join("\n"):" "+Ge(e[0]):"as no adapter specified";throw new J("There is no suitable adapter to dispatch the request "+r,"ERR_NOT_SUPPORT")}return n};function Ye(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ae(null,e)}function Ze(e){return Ye(e),e.headers=ve.from(e.headers),e.data=Le.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Qe(e.adapter||ge.adapter)(e).then((function(t){return Ye(e),t.data=Le.call(e,e.transformResponse,t),t.headers=ve.from(t.headers),t}),(function(t){return Te(t)||(Ye(e),t&&t.response&&(t.response.data=Le.call(e,e.transformResponse,t.response),t.response.headers=ve.from(t.response.headers))),Promise.reject(t)}))}const et={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{et[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}}));const tt={};et.transitional=function(e,t,r){function n(e,t){return"[Axios v1.7.2] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,s,o)=>{if(!1===e)throw new J(n(s," has been removed"+(t?" in "+t:"")),J.ERR_DEPRECATED);return t&&!tt[s]&&(tt[s]=!0,console.warn(n(s," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,s,o)}};const rt={assertOptions:function(e,t,r){if("object"!=typeof e)throw new J("options must be an object",J.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const o=n[s],i=t[o];if(i){const t=e[o],r=void 0===t||i(t,o,e);if(!0!==r)throw new J("option "+o+" must be "+r,J.ERR_BAD_OPTION_VALUE)}else if(!0!==r)throw new J("Unknown option "+o,J.ERR_BAD_OPTION)}},validators:et},nt=rt.validators;class st{constructor(e){this.defaults=e,this.interceptors={request:new se,response:new se}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t;Error.captureStackTrace?Error.captureStackTrace(t={}):t=new Error;const r=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?r&&!String(e.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+r):e.stack=r}catch(e){}}throw e}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Ie(this.defaults,t);const{transitional:r,paramsSerializer:n,headers:s}=t;void 0!==r&&rt.assertOptions(r,{silentJSONParsing:nt.transitional(nt.boolean),forcedJSONParsing:nt.transitional(nt.boolean),clarifyTimeoutError:nt.transitional(nt.boolean)},!1),null!=n&&(H.isFunction(n)?t.paramsSerializer={serialize:n}:rt.assertOptions(n,{encode:nt.function,serialize:nt.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=s&&H.merge(s.common,s[t.method]);s&&H.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete s[e]})),t.headers=ve.concat(o,s);const i=[];let a=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,i.unshift(e.fulfilled,e.rejected))}));const c=[];let l;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let u,d=0;if(!a){const e=[Ze.bind(this),void 0];for(e.unshift.apply(e,i),e.push.apply(e,c),u=e.length,l=Promise.resolve(t);d<u;)l=l.then(e[d++],e[d++]);return l}u=i.length;let h=t;for(d=0;d<u;){const e=i[d++],t=i[d++];try{h=e(h)}catch(e){t.call(this,e);break}}try{l=Ze.call(this,h)}catch(e){return Promise.reject(e)}for(d=0,u=c.length;d<u;)l=l.then(c[d++],c[d++]);return l}getUri(e){return ne(Oe((e=Ie(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}H.forEach(["delete","get","head","options"],(function(e){st.prototype[e]=function(t,r){return this.request(Ie(r||{},{method:e,url:t,data:(r||{}).data}))}})),H.forEach(["post","put","patch"],(function(e){function t(t){return function(r,n,s){return this.request(Ie(s||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}st.prototype[e]=t(),st.prototype[e+"Form"]=t(!0)}));const ot=st;class it{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const r=this;this.promise.then((e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null})),this.promise.then=e=>{let t;const n=new Promise((e=>{r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e((function(e,n,s){r.reason||(r.reason=new Ae(e,n,s),t(r.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new it((function(t){e=t})),cancel:e}}}const at=it,ct={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ct).forEach((([e,t])=>{ct[t]=e}));const lt=ct,ut=function e(t){const r=new ot(t),n=s(ot.prototype.request,r);return H.extend(n,ot.prototype,r,{allOwnKeys:!0}),H.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return e(Ie(t,r))},n}(ge);ut.Axios=ot,ut.CanceledError=Ae,ut.CancelToken=at,ut.isCancel=Te,ut.VERSION="1.7.2",ut.toFormData=Q,ut.AxiosError=J,ut.Cancel=ut.CanceledError,ut.all=function(e){return Promise.all(e)},ut.spread=function(e){return function(t){return e.apply(null,t)}},ut.isAxiosError=function(e){return H.isObject(e)&&!0===e.isAxiosError},ut.mergeConfig=Ie,ut.AxiosHeaders=ve,ut.formToJSON=e=>pe(H.isHTMLForm(e)?new FormData(e):e),ut.getAdapter=Qe,ut.HttpStatusCode=lt,ut.default=ut;const dt=ut,ht="https://project.farhadkazemzadeh.ir";class pt{static showLoading(){document.querySelector(".loading-container").setAttribute("data-show","true")}static hideLoading(){document.querySelector(".loading-container").setAttribute("data-show","false")}}class mt{constructor(){this.soundList=[],this.id=null,this.musicWrapper=document.querySelector("#sound-wrapper"),this.musicTemplate=document.querySelector("#sound-template"),this.namePodcast=document.querySelector("#podcast-name")}async getSounds(e){if(+this.id==+e)return this.soundList;this.id=e,this.clearData(),pt.showLoading();const{data:t}=await this.fetch(e);return pt.hideLoading(),this.postResult(t)}postResult(e){return"success"===e.status?(this.soundList=e.sounds.map((e=>new n(e,this.musicTemplate))),this.soundList):void 0}clearData(){this.soundList=[]}async handleGetPodcast(){document.querySelectorAll(".swiper-slide").forEach((e=>{e.addEventListener("click",(e=>{const t=e.currentTarget.getAttribute("data-select-id");this.showPodcastName(e.target),this.getSoundData(t)}))}))}showPodcastName(e){const t=e.getAttribute("alt");this.namePodcast.textContent=t}async getSoundData(e){const t=await this.getSounds(e);t?this.renderSounds(t):this.noData()}noData(){this.musicWrapper.innerHTML='<div class="bg-danger text-white w-100 py-3 text-center mt-2 rounded-2 fw-bold">هیچ پادکسی وجود ندارد</div>'}renderSounds(e){this.musicWrapper.innerHTML="",e.forEach((e=>{this.musicWrapper.append(e.renderSounds())}))}fetch(e){const t=new FormData;return t.append("id",e),t.append("limit",5),dt.post(`${ht}/podcastId`,t)}}class gt{constructor(e){this.text=e,this.toastWrapper=document.getElementById("toastMessage"),this.toastElm,this.createElement()}createElement(){this.toastElm=document.createElement("div"),this.toastElm.classList.add("Toast"),this.toastElm.textContent=this.text}success(){this.toastElm.setAttribute("id","addToast"),this.toastWrapper.append(this.toastElm),this.remove()}errors(){this.toastElm.setAttribute("id","delToast"),this.toastWrapper.append(this.toastElm),this.remove()}remove(){setTimeout((()=>{this.toastElm.remove()}),2500)}}class ft{constructor(){this.errors=[],this.loginBtn=document.getElementById("login-btn"),this.loginInputs=document.querySelectorAll(".stuLogin-input"),this.errorWrapper=document.getElementById("errors-empty"),this.email=document.getElementById("login-email"),this.password=document.getElementById("login-password")}submit(){this.loginBtn.addEventListener("click",this.validate.bind(this))}validate(){this.checkLogin(),this.errors.length>0?this.showError():this.sendRequest()}async sendRequest(){const{data:e}=await this.fetch();console.log(e.message),"ok"===e.status?this.successLogin(e):this.handleError(e.message)}successLogin(e){const t=e.data.name,r=e.data.token;new gt(" ورود با موفقیت انجام شد").success(),Wt.getAuthServices().setLoginToLocalStorage(t,r),Wt.getRouter().navigateTo("profile")}handleError(e){this.errors.push(e),this.showError()}fetch(){const e=this.email.value,t=this.password.value,r=new FormData;return r.append("email",e),r.append("password",t),dt.post(`${ht}/login`,r)}showError(){this.errorWrapper.innerHTML="",this.errors.forEach((e=>{const t=document.createElement("LI");t.classList.add("stuRegister__error"),t.textContent=e,this.errorWrapper.append(t)}))}checkLogin(){this.errors=[],this.loginInputs.forEach((e=>{if(""===e.value.trim()){const t=`فیلد\n        ${e.getAttribute("data-title")}\n        نباید خالی باشد\n        `;this.errors.push(t)}}))}}class yt{constructor(){this.handleNavigate()}handleNavigate(){const e=document.querySelectorAll(".dashboard__item"),t=document.querySelectorAll(".section-item");e.forEach(((r,n)=>{r.addEventListener("click",(()=>{e.forEach((e=>e.classList.remove("active"))),r.classList.add("active"),t.forEach((e=>e.classList.add("d-none"))),t[n].classList.remove("d-none")}))}))}}class St{constructor(){this.errors=[],this.registerBtn=document.getElementById("register-btn"),this.form=document.getElementById("form-register"),this.inputs=document.querySelectorAll(".stuRegister__Input"),this.name=document.getElementById("register-name"),this.email=document.getElementById("register-email"),this.phone=document.getElementById("register-phone"),this.password=document.getElementById("register-password"),this.rePassword=document.getElementById("register-repassword"),this.errorWrapper=document.getElementById("errors-empty")}submit(){this.registerBtn.addEventListener("click",this.validate.bind(this))}validate(){this.clearErrors(),this.checkValidate(),this.checkPassword(),this.errors.length>0?this.showErrors():this.getFormData()}getFormData(){const e=this.name.value,t=this.email.value,r=this.phone.value,n=this.password.value;this.submitForm(t,e,r,n)}async submitForm(e,t,r,n){const s=new FormData;s.append("email",e),s.append("name",t),s.append("phone",r),s.append("password",n),pt.showLoading();const{data:o}=await dt.post(`${ht}/register`,s);pt.hideLoading(),"error"===o.status?this.handleAPIErrors(o.errors):this.verifyUser()}verifyUser(){const e=this.email.value;Wt.emailServices().setEmail(e),Wt.getRouter().navigateTo("verify")}handleAPIErrors(e){this.errorWrapper.innerHTML="";const t={email:document.getElementById("errors-email"),name:document.getElementById("errors-name"),phone:document.getElementById("errors-phone"),password:document.getElementById("errors-password")};for(const e in t)t[e].innerHTML="";for(const r in e)if(e[r].length>0){const n=t[r];for(const t of e[r]){const e=document.createElement("LI");e.classList.add("stuRegister__error"),e.textContent=t,n.append(e)}}}showErrors(){this.errorWrapper.innerHTML="",this.errors.forEach((e=>{const t=document.createElement("LI");t.classList.add("stuRegister__error"),t.textContent=e,this.errorWrapper.append(t)}))}checkPassword(){if(this.password.value!=this.rePassword.value){const e="گذرواژه و تکرار گذرواژه همخوانی ندارد";this.errors.push(e)}}checkValidate(){this.inputs.forEach((e=>{if(""==e.value.trim()){let t=`فیلد ${e.getAttribute("data-title")} نباید خالی باشد`;this.errors.push(t)}}))}clearErrors(){this.errors=[]}}class bt{constructor(){this.settingElm,this.name,this.bio,this.userName,this.email,this.phone}handleEvent(){this.settingElm=document.querySelectorAll(".setting__prev"),this.handleSetting()}handleSetting(){this.settingElm.forEach((e=>{e.addEventListener("click",this.getSettingInfo.bind(this))}))}getSettingInfo(e){const t=e.currentTarget.getAttribute("data-name");this.completeSetting(t)}async completeSetting(e){const t=await this.getUserData();let r,n,s;switch(e){case"name":r="نام نمایشی",n="name",s=t.name;break;case"bio":r="شرح مختصری از خودتان را وارد کنید",n="bio",s=t.bio;break;case"username":r="نام کاربری شما",n="username",s=t.username;break;case"email":r="ایمیل شما",n="email",s=t.email;break;case"phone":r="شماره همراه شما",n="phone",s=t.phone;break;case"password":r="تغییر گذرواژه",n="password",s=""}this.beforeShowSetting(r,n,s)}beforeShowSetting(e,t,r){const n=document.getElementById("name-seting-user"),s=document.getElementById("input-seting-user");n.textContent=e,s.setAttribute("name",t),s.setAttribute("value",r),this.afterShowSetting()}afterShowSetting(){const e=document.getElementById("show-setting"),t=document.querySelector(".close-setting"),r=document.getElementById("submit-setting");e.classList.remove("d-none"),t.addEventListener("click",(()=>{e.classList.add("d-none")})),r.addEventListener("click",this.submitSetting.bind(this))}async submitSetting(){const e=document.getElementById("input-seting-user"),t=e.getAttribute("name"),r=e.value,n=new FormData;n.append("key",t),n.append("value",r);const{data:s}=await dt.post(`${ht}/update`,n);"ok"===s.status?this.successSubmit(s):this.errorSubmit()}successSubmit(e){console.log(e),Wt.getRouter().navigateTo("setting"),Wt.getAuthServices().setLoginToLocalStorage(e.data.name,e.data.token),new gt("ویرایش با موفقیت انجام شد").success()}errorSubmit(){new gt("ویرایش با شکست مواجه شد").errors()}async getUserData(){const{data:e}=await dt.get(`${ht}/getuser`);return e}renderUserInfo(e,t){this.getContent(t),this.renderContent(e)}getContent(e){this.name=e.querySelector("#Name"),this.bio=e.querySelector("#Description"),this.userName=e.querySelector("#userName"),this.email=e.querySelector("#email"),this.phone=e.querySelector("#phone")}renderContent(e){this.name.textContent=e.name,this.bio.textContent=e.bio,this.userName.textContent=e.username,this.email.textContent=e.email,this.phone.textContent=e.phone}deleteAccount(){document.getElementById("delete-account").addEventListener("click",this.checkDeleteAccount.bind(this))}checkDeleteAccount(){const e=document.getElementById("delete-box"),t=document.querySelector(".delete-setting"),r=document.getElementById("input-delete-user"),n=document.getElementById("submit-delete");t.addEventListener("click",(()=>{e.classList.add("d-none")})),e.classList.remove("d-none"),n.addEventListener("click",(()=>{""!=r&&"delete"===r.value&&this.deleteFetch()}))}async deleteFetch(){dt.delete(`${ht}/deleteUser`).then((()=>{new gt("اکانت شما با موفقیت حذف شد").success(),Wt.getAuthServices().logOut(),Wt.getHomeServices().changeFlag(),Wt.getRouter().navigateTo("home")})).catch((e=>{console.log(e),new gt("در حذف اکانت شما مشکلی به وجود آمد").errors()}))}}class wt{constructor(){this.postTitle=document.querySelector(".post__title"),this.postFile=document.querySelector("#file-input"),this.postCategory=document.querySelector("#category-post"),this.postRange=document.querySelector("#rangeInput"),this.submitBtn=document.querySelector("#submit-post"),this.postDescription,this.tags=[],this.handleEvent()}handleEvent(){this.submitBtn.addEventListener("click",this.handleAsyncTags.bind(this))}handleAsyncTags(){this.postDescription=document.querySelector(".ck-content"),this.postTags=document.querySelectorAll(".tags-block-list--item > span"),this.postTags.forEach((e=>{this.tags.push(e.textContent)})),this.fetch()}async fetch(){const e=new FormData;e.append("title",this.postTitle.value),e.append("description",this.postDescription.innerHTML),e.append("categoryId",this.postCategory.value),e.append("tags",this.tags),e.append("timeread",this.postRange.value),e.append("image",this.postFile.files[0],this.postFile.value),pt.showLoading();const{data:t}=await dt.post(`${ht}/quotes`,e);"ok"===t.status?(Wt.getRouter().navigateTo("profile"),new gt("پست شما با موفقیت ایجاد شد").success()):new gt("در ایجاد پست شما مشکلی پیش آمده است").errors(),pt.hideLoading()}}class Et{constructor(){this.postTitle=document.querySelector(".post__title"),this.publish=document.getElementById("published"),this.errorMessage=document.getElementById("error-published"),this.prevPost=document.querySelector(".prev-post"),this.closePrev=document.querySelector("#close-setting")}handleEvents(){this.publish.addEventListener("click",this.validate.bind(this)),this.closePrev.addEventListener("click",this.closePostPrev.bind(this))}validate(){this.checkPost()}checkPost(){""===this.postTitle.value.trim()?this.errorMessage.textContent="برای ورود به بخش تنظیمات عنوان نباید خالی باشد":(this.errorMessage.innerHTML="",this.prevPost.classList.remove("hidden"))}closePostPrev(){this.prevPost.classList.add("hidden")}}const vt=[new class extends r{async beforeRender(e){const t=document.createElement("section");t.innerHTML=e,pt.showLoading();const r=await Wt.getHomeServices().getPosts(),s=t.querySelector("#post-template"),o=t.querySelector("#post-container");r.forEach((e=>{o.append(e.renderPost(s))}));const i=await Wt.getPodcastServices().getPodcast(),a=t.querySelector("#podcast-template"),c=t.querySelector("#podcast-wrapper");i.forEach((e=>{c.append(e.renderPodcast(a))})),t.querySelector("#podcast-name").textContent=i[0].name;const l=await Wt.getSoundServices().getSounds(i[0].id);console.log(l);const u=t.querySelector("#sound-wrapper"),d=t.querySelector("#sound-template");l.forEach((e=>{const t=new n(e,d).renderSounds();u.append(t)}));const h=await Wt.getCategoryServices().getCategory(),p=t.querySelector("#category-template"),m=t.querySelector("#category-wrapper");return h.forEach((e=>{m.append(e.renderCategory(p))})),pt.hideLoading(),t.innerHTML}afterRender(){this.handleSwiper(),this.search(),(new mt).handleGetPodcast(),this.handlerPodcast()}handlerPodcast(){Wt.getPodcastServices().handlePlayPodcast()}handleSwiper(){new Swiper(".mySwiper",{pagination:{el:".swiper-pagination",type:"progressbar"},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},slidesPerView:"auto"})}search(){const e=document.getElementById("search");e.addEventListener("keydown",(t=>{if("Enter"===t.key){const t=e.value.trim();""!=t&&Wt.getSearchServices().handleSearch(t)}}))}}("home","home.html"),new class extends r{afterRender(){(new ft).submit()}restrictLogin(){return!0}}("login","login.html"),new class extends r{async beforeRender(e){const t=document.createElement("section");t.innerHTML=e,t.querySelector("#user-name").textContent=Wt.getAuthServices().name,pt.showLoading();const r=await Wt.getProfileServices().getPosts(),n=t.querySelector("#post-template"),s=t.querySelector("#post-container");return r&&(r.forEach((e=>{s.append(e.renderPost(n))})),r.length>0&&t.querySelector(".dashboard__empty").classList.add("d-none")),pt.hideLoading(),t.innerHTML}afterRender(){this.handleNavigate(),this.handleDeletePost()}async handleDeletePost(){document.querySelectorAll(".delete-post").forEach((e=>{e.addEventListener("click",(async t=>{const r=t.currentTarget.getAttribute("data-select-id");if(!confirm("آیا از حدف این پست مطمئن هستین؟"))return;const{data:n}=await Wt.getProfileServices().deletePost(r);"OK"===n.status?this.deleteSuccess(e):this.deleteFailed()}))}))}deleteSuccess(e){e.closest(".col-4").remove(),new gt("حذف پست با موفقیت انجام شد").success(),Wt.getHomeServices().changeFlag()}deleteFailed(){new gt("عملیات با شکست مواجه شد").errors()}handleNavigate(){new yt}mustBeLogin(){return!0}}("profile","profile.html"),new class extends r{afterRender(){(new St).submit()}restrictLogin(){return!0}}("register","register.html"),new class extends r{async beforeRender(e,t){const r=document.createElement("section");r.innerHTML=e,pt.showLoading();let n=Wt.getHomeServices().findPost(t);return n||(n=await Wt.getHomeServices().fetchDataId(t)),this.renderBlogPage(n,r),pt.hideLoading(),r.innerHTML}afterRender(){this.handlerPublish()}handlerPublish(){document.querySelector(".publish-post").addEventListener("click",(e=>{const t=e.currentTarget.getAttribute("data-select-id");Wt.getProfileServices().updatePost(t)}))}renderBlogPage(e,t){if(t.querySelectorAll(".img-author").forEach((t=>{t.setAttribute("src",e.user_imageurl)})),t.querySelectorAll(".name-author").forEach((t=>{t.textContent=e.username,t.setAttribute("data-select-id",e.user_id)})),t.querySelector("#time-blog").textContent=e.timeread,t.querySelector("#time-publish").textContent=e.time_frame,t.querySelector("#blog-title").textContent=e.title,t.querySelector("#blog-description").innerHTML=e.description,t.querySelector("#description-author").innerHTML=e.user_bio,0==+e.valid){const r=t.querySelector(".publish-post");r.classList.remove("d-none"),r.setAttribute("data-select-id",e.id)}}}("blog","blog.html"),new class extends r{async beforeRender(e,t){const r=document.createElement("section");r.innerHTML=e;const n=await Wt.getCategoryServices().fetchIdCategory(t);return this.categoryWrapper=r.querySelector("#category-wrapper"),this.categoryTemplate=r.querySelector("#category-template"),this.categoryName=r.querySelector("#tag-content"),this.renderCategoryId(n,r),r.innerHTML}afterRender(){console.log("Tag PAGE")}renderCategoryId(e){this.categoryName.textContent=e.name,e.posts.length>0?this.existPosts(e.posts):this.notExistPost(e.name)}existPosts(e){e.forEach((e=>{const t=document.importNode(this.categoryTemplate.content,!0);t.querySelector("#post-image").src=`${ht}/${e.imageUrl}`,t.querySelector("#post-title").textContent=e.title,t.querySelector("#post-title").setAttribute("data-select-id",e.id),t.querySelector("#post-publish").textContent=e.time_frame,t.querySelector("#post-like").textContent=e.likecount,t.querySelector("#post-comment").textContent=e.commentcount,this.categoryWrapper.append(t)}))}notExistPost(e){this.categoryWrapper.innerHTML=`<div class="mt-8 py-4 bg-danger text-white rounded-2 w-100 text-center">هیچ پستی برای\n    ${e}\n    وجود ندارد\n    </div>`}}("tag","tag.html"),new class extends r{otpInputs;afterRender(){this.getActivateCode()}getActivateCode(){this.otpInputs=document.querySelectorAll(".otp-input"),this.otpInputs.forEach(((e,t)=>{e.addEventListener("input",(e=>{e.target.value=e.target.value.slice(0,1),1===e.target.value.length&&(t<this.otpInputs.length-1?this.otpInputs[t+1].focus():this.sendRequest())}))}))}async sendRequest(){pt.showLoading();const{data:e}=await this.fetch();pt.hideLoading(),this.checkResult(e)}checkResult(e){"ok"===e.status?(new gt("ثبت نام با موفقیت انجام شد").success(),this.concatInput(2),Wt.emailServices().clearEmail(),setTimeout((()=>{Wt.getRouter().navigateTo("login")}),1500)):this.concatInput(3)}fetch(){const e=this.getEmail(),t=this.concatInput(1),r=new FormData;return r.append("otp",t),r.append("email",e),dt.post(`${ht}/otp`,r)}concatInput(e){let t="";return this.otpInputs.forEach((r=>{1==+e?t+=r.value:2==+e?r.style.backgroundColor="greenyellow":3==+e&&(r.style.backgroundColor="#b31515")})),t}getEmail(){return Wt.emailServices().getEmail()}}("verify","verify.html"),new class extends r{async beforeRender(e,t){const r=document.createElement("section");r.innerHTML=e,this.setting=new bt;const n=await this.setting.getUserData();return this.setting.renderUserInfo(n,r),r.innerHTML}afterRender(){new yt,this.setting.handleEvent(),this.setting.deleteAccount()}mustBeLogin(){return!0}}("setting","setting.html"),new class extends r{async beforeRender(e){const t=document.createElement("section");t.innerHTML=e;const r=t.querySelector("#category-post");return(await Wt.getPostServices().fetchCategory()).forEach((e=>{r.append(e.renderPost())})),t.innerHTML}afterRender(){this.ckEditorSetting(),(new Et).handleEvents(),Wt.getPostServices().rangeReadPost(),Wt.getPostServices().setTagsContent(),Wt.getPostServices().setPostImage(),new wt}mustBeLogin(){return!0}ckEditorSetting(){ClassicEditor.create(document.querySelector("#editor"),{language:"fa",toolbar:{items:["undo","redo","|","bold","italic","|","link","uploadImage","insertTable","mediaEmbed","|","heading","|","bulletedList","numberedList","|"]},ui:{viewportOffset:{top:window.innerHeight/8}}}).then((e=>{window.editor=e})).catch((e=>{console.error(e.stack)}))}}("post","post.html"),new class extends r{async beforeRender(e){const t=document.createElement("section");t.innerHTML=e;const r=await Wt.getTopicServices().getTopic(),n=t.querySelector("#topic-cat"),s=t.querySelector(".topic-wrapper");return r.forEach((e=>{s.append(e.renderTopic(n))})),t.innerHTML}afterRender(){}}("topic","topic.html"),new class extends r{async beforeRender(e,t){const r=document.createElement("section");r.innerHTML=e,pt.showLoading();const n=await Wt.getUserServices().getInfo(t);r.querySelector("#user-name").textContent=n.name,r.querySelector("#user-bio").textContent=n.bio;const s=await Wt.getUserServices().getUserPost(t),o=r.querySelector("#post-template"),i=r.querySelector("#post-container");return s.forEach((e=>{i.append(e.renderPost(o))})),pt.hideLoading(),r.innerHTML}afterRender(){}}("user","user.html"),new class extends r{async beforeRender(e,t){const r=document.createElement("section");r.innerHTML=e;const{searchResult:n}=t;return this.userContainer=r.querySelector("#user-container"),this.userTemplate=r.querySelector("#user-template"),n.users.length>0?n.users.forEach((e=>{this.userContainer.append(Wt.getSearchRenderServices().renderUser(e,this.userTemplate))})):this.userContainer.innerHTML='<div class="mt-5 py-4 text-white bg-danger rounded-2 text-center fw-bold">هیچ کاربری با این کلمه کلیدی وجود ندارد</div>',this.postContainer=r.querySelector("#post-container"),this.postTemplate=r.querySelector("#post-template"),n.quotes.length>0?n.quotes.forEach((e=>{this.postContainer.append(Wt.getSearchRenderServices().renderPost(e,this.postTemplate))})):this.postContainer.innerHTML='<div class="mt-5 py-4 text-white bg-danger rounded-2 text-center fw-bold">هیچ پستی با این کلمه کلیدی وجود ندارد</div>',r.innerHTML}afterRender(){new yt}}("search","search.html")];class Lt{constructor(){this.loginElm=document.querySelector(".login-NoActivate"),this.accountElm=document.querySelector(".account"),this.logOut=document.getElementById("logOut"),this.changeBtn=document.getElementById("change-theme"),this.handlerEvent()}handlerEvent(){this.loginElm.addEventListener("click",this.renderAccount.bind(this)),this.logOut.addEventListener("click",this.logOutUser.bind(this)),this.changeBtn.addEventListener("click",this.changeTheme.bind(this))}changeTheme(){Wt.getChangeTheme().handleTheme()}logOutUser(){Wt.getAuthServices().logOut(),Wt.getRouter().navigateTo("home"),new gt("شما از پنل کاربری خارج شدید").success()}renderAccount(){this.accountElm.classList.toggle("hidden")}}class Tt{constructor(e,t){this.allPages=e,this.app=t}navigateTo(e,t=null){const r=this.allPages.find((t=>t.pageName===e));r&&(r.renderContent(this.app.getContainer(),t),history.pushState({content:e},"",e))}}class Rt{constructor(){this.name=null,this.token=null,this.checkLogin()}login(e,t){this.name=e,this.token=t,this.renderUserAccount()}setLoginToLocalStorage(e,t){this.login(e,t),localStorage.setItem("name",e),localStorage.setItem("token",t)}renderUserAccount(){const e=document.querySelector(".login-activate"),t=document.querySelector(".login-NoActivate"),r=document.querySelectorAll(".name-user");this.checkLogin()?(e.classList.add("hidden"),t.classList.remove("hidden"),r.forEach((e=>{e.textContent=this.name}))):(e.classList.remove("hidden"),t.classList.add("hidden"))}logOut(){this.name=null,this.token=null,localStorage.removeItem("name"),localStorage.removeItem("token"),this.renderUserAccount()}checkLogin(){if(this.name&&this.token)return!0;const e=localStorage.getItem("name"),t=localStorage.getItem("token");return!(!e||!t||(this.login(e,t),0))}}class At{constructor(e){for(let t in e)this[t]=e[t]}renderCategory(e){const t=document.importNode(e.content,!0);return t.querySelector("#tags").textContent=this.name,t.querySelector("#tags").setAttribute("data-select-id",this.id),t}}class Pt{constructor(){this.categoryList=[]}async getCategory(){if(this.categoryList.length>0)return this.categoryList;const{data:e}=await this.fetch();return this.categoryList=e.map((e=>new At(e))),this.categoryList}async fetchIdCategory(e){const{data:t}=await dt.get(`${ht}/category/${e}`);return t}fetch(){return dt.get(`${ht}/category`)}}class Ct{constructor(){this.email=""}setEmail(e){this.email=e,localStorage.setItem("email",e)}loadEmailFromLocalStorage(){this.email=localStorage.getItem("email")}clearEmail(){localStorage.removeItem("email")}getEmail(){return this.email}}class qt{constructor(e){for(let t in e)this[t]=e[t]}renderPost(e){const t=document.importNode(e.content,!0);return t.querySelectorAll(".post-blog").forEach((e=>{e.setAttribute("data-select-id",this.id)})),t.querySelector("#author-image").src=this.user_imageurl,t.querySelector("#author-name").textContent=this.username,t.querySelector("#author-name").setAttribute("data-select-id",this.user_id),t.querySelector("#post-publish").textContent=this.time_frame,t.querySelector("#post-title").textContent=this.title,t.querySelector("#post-description").innerHTML=this.description,t.querySelector("#post-image").src=`${ht}/${this.imageUrl}`,t.querySelector("#post-category").textContent=this.category_title,t.querySelector("#post-category").setAttribute("data-select-id",this.categoryId),t.querySelector("#post-readtime").textContent=this.timeread,t.querySelector("#post-like").textContent=this.likecount,t.querySelector("#post-comment").textContent=this.commentcount,t}}class xt{constructor(){this.postList=[],this.changePostList=!1}async getPosts(){if(this.postList.length>0&&!this.changePostList)return this.postList;this.changePostList&&(this.changePostList=!1);const{data:e}=await this.fetch();return this.postList=e.map((e=>new qt(e))),this.postList}changeFlag(){this.changePostList=!0}findPost(e){return this.postList.find((t=>+t.id==+e))}async fetchDataId(e){const{data:t}=await dt.get(`${ht}/quotes/${e}`);return t}fetch(){return dt.get(`${ht}/quotes`)}}class Ot{constructor(e){for(let t in e)this[t]=e[t]}renderPodcast(e){const t=document.importNode(e.content,!0);return t.querySelector("#swiper-img").src=this.thumbnail,t.querySelector("#swiper-img").setAttribute("alt",this.name),t.querySelector(".swiper-slide").setAttribute("data-select-id",this.id),t}}class kt{constructor(){this.podcastList=[],this.sounds}async getPodcast(){if(this.podcastList.length>0)return this.podcastList;const{data:e}=await this.fetch();return this.podcastList=e.podcasts.map((e=>new Ot(e))),this.podcastList}handlePlayPodcast(){this.sounds=document.querySelectorAll(".sound-link"),this.sounds.forEach((e=>{e.addEventListener("click",(e=>{const t=e.currentTarget.getAttribute("data-src");this.playPodcast(t,e.currentTarget),this.changeIconPodcast(e.currentTarget)}))}))}changeIconPodcast(e){this.sounds.forEach((e=>{e.children[0].classList.remove("fa-pause"),e.children[0].classList.add("fa-play")}));const t=e.children[0];t.classList.remove("fa-play"),t.classList.add("fa-spin","fa-spinner")}playPodcast(e,t){const r=t.children[0],n=document.getElementById("audio-player");n.setAttribute("src",e),n.classList.remove("d-none"),n.play().then((()=>{console.log("PLAY"),r.classList.remove("fa-spin","fa-spinner"),r.classList.add("fa-pause")})).catch((e=>{r.classList.remove("fa-spin","fa-spinner"),new gt("لطفا منتظر باشید....").errors()}))}fetch(){return dt.get(`${ht}/podcast`)}}class It{constructor(e){for(let t in e)this[t]=e[t]}renderPost(){const e=document.createElement("option");return e.textContent=this.name,e.setAttribute("value",this.id),e}}class Nt{constructor(){this.catList=[],this.categoryWrapper=document.getElementById("category-post"),this.range,this.tagWrapper,this.tagInput}async fetchCategory(){const e=await Wt.getCategoryServices().getCategory();return this.catList=e.map((e=>new It(e))),this.catList}rangeReadPost(){this.range=document.getElementById("rangeInput"),this.range.addEventListener("input",this.updateRange.bind(this))}updateRange(){const e=document.getElementById("value"),t=this.range.value;e.textContent=t,this.range.value=t}setTagsContent(){this.tagWrapper=document.querySelector(".tags-block-list"),this.tagInput=document.querySelector(".tags-block--add"),this.setTagPost()}setTagPost(){this.tagInput.addEventListener("keydown",(e=>{if("Enter"===e.key||"-"===e.key){e.preventDefault();const t=this.tagInput.value;""!==t.trim()&&this.createTagElements(t)}}))}createTagElements(e){const t=document.createElement("LI"),r=document.createElement("SPAN");t.classList.add("tags-block-list--item"),r.textContent=e,t.append(r),t.innerHTML+='<button class="tags-block-list--remove">x</button>',this.tagWrapper.append(t),this.tagInput.value="",this.removeTagElements(t)}removeTagElements(e){e.querySelector(".tags-block-list--remove").addEventListener("click",(()=>{this.tagWrapper.removeChild(e)}))}setPostImage(){const e=document.getElementById("upload-div"),t=document.getElementById("file-input"),r=document.getElementById("preview-image");e.addEventListener("click",(()=>{t.click()})),t.addEventListener("change",(e=>{const n=new FileReader;n.onload=e=>{r.src=e.target.result},t.files[0]&&n.readAsDataURL(t.files[0])}))}}class Bt{constructor(e){for(let t in e)this[t]=e[t]}renderPost(e){const t=document.importNode(e.content,!0);if(t.querySelector("#post-image").src=`${ht}/${this.imageUrl}`,t.querySelector("#post-title").textContent=this.title,t.querySelectorAll(".post-blog").forEach((e=>{e.setAttribute("data-select-id",this.id)})),t.querySelector("#post-publish").textContent=this.time_frame,t.querySelector("#post-category").textContent=this.category_title,t.querySelector("#post-like").textContent=this.likecount,t.querySelector("#post-comment").textContent=this.commentcount,1==+this.valid){const e=t.querySelector("#publish-status");e.textContent="منتشر شده",e.classList.replace("bg-danger","bg-success")}return t}}class _t{constructor(){this.postList=[]}async getPosts(){const{data:e}=await this.fetch();if("success"===e.status)return this.postList=e.quotes.map((e=>new Bt(e))),this.postList}async updatePost(e){const{data:t}=await dt.put(`${ht}/quotes/${e}`);Wt.getRouter().navigateTo("profile"),new gt("انتشار پست با موفقیت انجام شد").success(),Wt.getHomeServices().changeFlag()}async deletePost(e){return await dt.delete(`${ht}/quotes/${e}`)}fetch(){return dt.get(`${ht}/myquotes`)}}class Ut{renderUser(e,t){const r=document.importNode(t.content,!0);return r.querySelector("#image-search").setAttribute("src",e.profile_image),r.querySelector("#name-search").textContent=e.name,r.querySelector("#name-search").setAttribute("data-select-id",e.id),r.querySelector("#bio-search").textContent=e.bio,r}renderPost(e,t){const r=document.importNode(t.content,!0);return r.querySelectorAll(".post-blog").forEach((t=>{t.setAttribute("data-select-id",e.id)})),r.querySelector("#author-image").src=e.user_imageurl,r.querySelector("#author-name").textContent=e.username,r.querySelector("#author-name").setAttribute("data-select-id",e.user_id),r.querySelector("#post-publish").textContent=e.time_frame,r.querySelector("#post-title").textContent=e.title,r.querySelector("#post-description").innerHTML=e.description,r.querySelector("#post-image").src=`${ht}/${e.imageUrl}`,r.querySelector("#post-category").textContent=e.category_title,r.querySelector("#post-category").setAttribute("data-select-id",e.categoryId),r.querySelector("#post-readtime").textContent=e.timeread,r}}class Ft{constructor(){}handleSearch(e){this.getSearch(e)}async getSearch(e){const{data:t}=await this.fetch(e);Wt.getRouter().navigateTo("search",{searchResult:t})}fetch(e){return dt.get(`${ht}/quotes/search/${e}`)}}class Dt{constructor(e){for(let t in e)this[t]=e[t]}renderTopic(e){const t=document.importNode(e.content,!0);return t.querySelector(".main-topic").textContent=this.name,t.querySelector(".main-topic").setAttribute("data-select-id",this.id),this.children.forEach((e=>{const r=t.querySelector(".list-group"),n=document.createElement("A");n.className="list-group-item childTopic text-subtitle mt-3 fs-4 w-100 d-flex topic-item",n.textContent=e.name,n.setAttribute("data-select-id",e.id),n.setAttribute("href","/tag"),r.append(n)})),t}}class jt{constructor(){this.topicList=[]}async getTopic(){if(this.topicList.length>0)return this.topicList;const e=this.fetch();return this.topicList=e.map((e=>new Dt(e))),this.topicList}fetch(){return Wt.getCategoryServices().categoryList}}class Mt{constructor(){this.userPostList=[]}async getUserPost(e){const{data:t}=await this.fetchUserPost(e);if(console.log(t),t.length>0)return this.userPostList=t.map((e=>new qt(e))),this.userPostList}async getInfo(e){const{data:t}=await this.fetchUserInfo(e);return t}fetchUserPost(e){return dt.get(`${ht}/quotes/user/${e}`)}fetchUserInfo(e){const t=new FormData;return t.append("id",e),dt.post(`${ht}/userid`,t)}}class Ht{constructor(){this.themeName=document.getElementById("name-theme"),this.themeIcon=document.getElementById("theme-icon"),this.htmlElement=document.documentElement}getFromLocalStorage(){const e=localStorage.getItem("Theme");if(e){let t="";t="light"===e?"dark":"light",this.getModeTheme(t)}}handleTheme(){const e=this.htmlElement.getAttribute("data-bs-theme");this.getModeTheme(e)}getModeTheme(e){"light"===e?this.darkTheme():this.lightTheme(),this.setToLocalStorage(e)}darkTheme(){this.htmlElement.setAttribute("data-bs-theme","dark"),this.themeName.textContent="شب",this.themeIcon.classList.replace("fa-regular","fa-solid")}lightTheme(){this.htmlElement.setAttribute("data-bs-theme","light"),this.themeName.textContent="روز",this.themeIcon.classList.replace("fa-solid","fa-regular")}setToLocalStorage(e){let t="";t="light"===e?"dark":"light",localStorage.setItem("Theme",t)}}class $t{constructor(){this.container=document.getElementById("container");const e=vt;this.router=new Tt(e,this),this.handleNavigateLinks(),this.handleHistory(),this.handleFirstPage(),this.homeServices=new xt,this.podcastServices=new kt,this.categoryServices=new Pt,this.soundServices=new mt,this.emailServices=new Ct,this.authServices=new Rt,this.accountBtn=new Lt,this.postServices=new Nt,this.profileServices=new _t,this.changeTheme=new Ht,this.changeTheme.getFromLocalStorage(),this.topicServices=new jt,this.userServices=new Mt,this.searchServices=new Ft,this.searchRenderServices=new Ut}handleNavigateLinks(){document.addEventListener("click",(e=>{if("INPUT"===e.target.tagName)return;e.preventDefault();let t=null;"A"!=e.target.tagName&&(t=e.target.closest("A")),"A"===e.target.tagName&&e.target.getAttribute("href")&&(t=e.target),t&&this.router.navigateTo(t.getAttribute("href").substring(1),t.getAttribute("data-select-id"))}))}handleHistory(){window.addEventListener("popstate",(e=>{const t=e.state?e.state.content:"home";this.router.navigateTo(t)}))}handleFirstPage(){this.router.navigateTo("home")}getContainer(){return this.container}}class Wt{static init(){dt.defaults.headers.common.Accept="application/json",dt.defaults.headers.common.Authorization="Bearer 04df5ebd459160487c3d5b02f3b8c424939cbcd7b5313c58baae34a67c11b8b3",this.lunched=new $t}static getContainer(){return this.lunched.container}static getHomeServices(){return this.lunched.homeServices}static emailServices(){return this.lunched.emailServices}static getAuthServices(){return this.lunched.authServices}static getPostServices(){return this.lunched.postServices}static getProfileServices(){return this.lunched.profileServices}static getPodcastServices(){return this.lunched.podcastServices}static getSoundServices(){return this.lunched.soundServices}static getCategoryServices(){return this.lunched.categoryServices}static getRouter(){return this.lunched.router}static getChangeTheme(){return this.lunched.changeTheme}static getTopicServices(){return this.lunched.topicServices}static getUserServices(){return this.lunched.userServices}static getSearchServices(){return this.lunched.searchServices}static getSearchRenderServices(){return this.lunched.searchRenderServices}}Wt.init()})();